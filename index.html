<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><title>Bespoke.js: The Road to 1KB</title><link rel="stylesheet" type="text/css" href="bower_components/prism/prism-tomorrow.css"><link rel="stylesheet" type="text/css" href="styles/main.css"></head><body><article><section data-bespoke-state="fullthrottle"><h1>Bespoke.js: The Road to 1KB</h1></section><section data-bespoke-state="martymcfly"><h1>What?</h1></section><section data-bespoke-state="napoleon"><h1><a href="http://bit.ly/diyslides">bit.ly/diyslides</a></h1></section><section data-bespoke-state="mindblown"><h1>Google <a href="https://www.google.com/search?q=bespoke.js">"bespoke.js"</a></h1></section><section data-bespoke-state="cleese"><h1>Why?</h1></section><section data-bespoke-state="microjs" class="dark"><h1 class="bullet">&lt; = 5KB</h1><h2 class="bullet">No dependencies</h2></section><section data-bespoke-state="urkel" class="dark"><code class="language-javascript min wrap"><pre>/*! Bespoke.js v0.3 Â© 2013 Mark Dalgleish, Licensed MIT */
!function(a, b){var c=function(a, b){var c=document.querySelector(a), g=[].slice.call(c.children, 0), h=g[0], i={}, k=function(a, b){g[a]&amp;&amp;(p(&quot;deactivate&quot;, q(h, b)), h=g[a], g.map(l), p(&quot;activate&quot;, q(h, b)), e(h, &quot;active&quot;), f(h, &quot;inactive&quot;))}, l=function(a, b){var c=b-g.indexOf(h), d=c&gt;0?&quot;after&quot;:&quot;before&quot;;[&quot;before(-\\d+)?&quot;, &quot;after(-\\d+)?&quot;, &quot;active&quot;, &quot;inactive&quot;].map(f.bind(0, a)), a!=h&amp;&amp;[&quot;inactive&quot;, d, d+&quot;-&quot;+Math.abs(c)].map(e.bind(0, a))}, m=function(a, b){p(&quot;slide&quot;, q(g[a], b))&amp;&amp;k(a, b)}, n=function(a, b){var c=g.indexOf(h)+a;p(a&gt;0?&quot;next&quot;:&quot;prev&quot;, q(h, b))&amp;&amp;k(c, b)}, o=function(a, b){return(i[a]||(i[a]=[])).push(b), function(){i[a]=i[a].filter(function(a){return a!=b})}}, p=function(a, b){return(i[a]||[]).reduce(function(a, c){return a&amp;&amp;c(b)!==!1}, !0)}, q=function(a, b){return b=b||{}, b.index=g.indexOf(a), b.slide=a, b}, r={on:o, fire:p, slide:m, next:n.bind(0, 1), prev:n.bind(0, -1), parent:c, slides:g};e(c, &quot;parent&quot;), g.map(function(a){e(a, &quot;slide&quot;)});for(var s in b)j[s](r, b[s]);return k(0), d.push(r), r}, d=[], e=function(b, c){b.classList.add(a+&quot;-&quot;+c)}, f=function(b, c){b.className=b.className.replace(RegExp(a+&quot;-&quot;+c+&quot;(\\s|$)&quot;, &quot;g&quot;), &quot; &quot;).trim()}, g=function(a){return function(b){d.map(function(c){c[a](b)})}}, h=function(a){return{from:function(b, d){return(d=d||{})[a]=!0, c(b, d)}}}, i=function(a){return function(b){var c, d;document.addEventListener(&quot;keydown&quot;, function(c){(34==c.which||32==c.which||&quot;X&quot;==a&amp;&amp;39==c.which||&quot;Y&quot;==a&amp;&amp;40==c.which)&amp;&amp;b.next(), (33==c.which||&quot;X&quot;==a&amp;&amp;37==c.which||&quot;Y&quot;==a&amp;&amp;38==c.which)&amp;&amp;b.prev()}), b.parent.addEventListener(&quot;touchstart&quot;, function(b){1==b.touches.length&amp;&amp;(c=b.touches[0][&quot;page&quot;+a], d=0)}), b.parent.addEventListener(&quot;touchmove&quot;, function(b){1==b.touches.length&amp;&amp;(b.preventDefault(), d=b.touches[0][&quot;page&quot;+a]-c)}), b.parent.addEventListener(&quot;touchend&quot;, function(){Math.abs(d)&gt;50&amp;&amp;(d&gt;0?b.prev():b.next())})}}, j={horizontal:i(&quot;X&quot;), vertical:i(&quot;Y&quot;)};b[a]={from:c, slide:g(&quot;slide&quot;), next:g(&quot;next&quot;), prev:g(&quot;prev&quot;), horizontal:h(&quot;horizontal&quot;), vertical:h(&quot;vertical&quot;), plugins:j}}(&quot;bespoke&quot;, this);
</pre></code></section><section data-bespoke-state="no"><h1 class="bullet">Feature request?</h1><h2 class="bullet">Just say no.</h2></section><section data-bespoke-state="ohboy" class="dark"><h1 class="bullet">Want features?</h1><h2 class="bullet">Make it modular</h2></section><section data-bespoke-state="computerdance"><ul><li><a href="https://github.com/markdalgleish/bespoke-bullets">bespoke-bullets</a></li><li><a href="https://github.com/markdalgleish/bespoke-hash">bespoke-hash</a></li><li><a href="https://github.com/markdalgleish/bespoke-state">bespoke-state</a></li><li><a href="https://github.com/markdalgleish/bespoke-loop">bespoke-loop</a></li><li><a href="https://github.com/markdalgleish/bespoke-vcr">bespoke-vcr</a></li><li><a href="https://github.com/markdalgleish/bespoke-spotlight">bespoke-spotlight</a></li><li><a href="https://github.com/markdalgleish/bespoke-blackout">bespoke-blackout</a></li></ul></section><section data-bespoke-state="gruntmicro" class="dark"><h1 class="bullet">grunt-micro</h1><ul><li>(by me)</li><li>JS too large?</li><li>Break the build!</li></ul></section><section data-bespoke-state="mindblown"><h1>Google<br /><a href="https://www.google.com/search?q=grunt-micro">"grunt-micro"</a></h1></section><section data-bespoke-state="programming"><h1 class="bullet">Limit that size</h1><ul><li>ES5 / Modern Browser isn't a "dependency"</li><li>Bonus: ES5 === expressive</li></ul></section><section data-bespoke-state="pumped"><h1>Code time!</h1></section><section data-bespoke-state="whoa"><h2 class="bullet bullet">forEach</h2><code class="language-javascript bullet"><pre>for(var i=0;i&lt;things.length;i++){
  doSomething(things[i]);
}</pre></code><h3 class="bullet">Vs.</h3><code class="language-javascript bullet"><pre>things.forEach(doSomething);</pre></code></section><section data-bespoke-state="whoa"><h2 class="bullet">Partial application</h2><code class="language-javascript bullet"><pre>function(cls){ addClass(slide, cls); }</pre></code><h3 class="bullet">Vs.</h3><code class="language-javascript bullet"><pre>addClass.bind(null, slide);</pre></code><h3 class="bullet">Function#bind returns a new function<br />with 'this' <em>and arguments</em> applied.</h3></section><section data-bespoke-state="pumped"><h1>Hack time!</h1></section><section data-bespoke-state="whoa"><h2 class="bullet">forEach ~> map</h2><code class="language-javascript bullet"><pre>arr.forEach(doSomething);</pre></code><h3 class="bullet">Vs.</h3><code class="language-javascript bullet"><pre>arr.map(doSomething);</pre></code><h3 class="bullet">Array#map returns an array, just don't use it.</h3></section><section data-bespoke-state="whoa"><h2 class="bullet">Undefined fallbacks</h2><code class="language-javascript bullet"><pre>if(obj)Object.keys(obj).forEach(foo);</pre></code><h3 class="bullet">Vs.</h3><code class="language-javascript bullet"><pre>Object.keys(obj||{}).forEach(foo);</pre></code><hr><ul><li>Object.keys on {} returns [].</li><li>Array#forEach on [] does nothing.</li></ul></section><section data-bespoke-state="whoa"><h2 class="bullet">RegExp doesn't need 'new'</h2><code class="language-javascript bullet"><pre>new RegExp(foobar);</pre></code><h3 class="bullet">Vs.</h3><code class="language-javascript bullet"><pre>RegExp(foobar);</pre></code><h3><span class="bullet">Don't believe me?</span><a href="http://es5.github.io/#x15.10.3.1" class="bullet"> Read the spec!</a></h3></section><section data-bespoke-state="whoa"><h2 class="bullet">Assignment returns value</h2><code class="language-javascript bullet"><pre>obj=obj||{};obj[prop] = true;</pre></code><h3 class="bullet">Vs.</h3><code class="language-javascript bullet"><pre>(obj=obj||{})[prop] = true;</pre></code></section><section data-bespoke-state="whoa"><h2 class="bullet">Double equals!</h2><code class="language-javascript bullet"><pre>obj1 === obj2</pre></code><h3 class="bullet">Vs.</h3><code class="language-javascript bullet"><pre>obj1 == obj2</pre></code><h3 class="bullet">Sorry Crockford, but<br />I know they're the same type.</h3></section><section data-bespoke-state="pumped"><h1>Actual solution time!</h1></section><section data-bespoke-state="seinfeldwhoa"><h1>Let's assume a lib like this</h1></section><section data-bespoke-state="seinfeldwhoa"><code class="language-javascript"><pre>myLib({
  foo: true,
  bar: false,
  baz: 'quz'
});</pre></code></section><section data-bespoke-state="seinfeldwhoa"><h1>Don't write it<br />like this</h1></section><section data-bespoke-state="seinfeldwhoa"><code class="language-javascript"><pre>var myLib = function(options) {
  if (options.foo) doThis();
  if (options.bar) doSomeOtherStuff();
  if (options.baz) coverSomeWeirdEdgeCase();
};</pre></code></section><section data-bespoke-state="seinfeldwhoa"><h1>Write it like this</h1></section><section data-bespoke-state="seinfeldwhoa"><code class="language-javascript bullet"><pre>var myLib = function(plugins) {
  for (var name in plugins) {
    var value = plugins[name];
    myLib.plugins[name](value);
  });
};
</pre></code><code class="language-javascript bullet"><pre>myLib.plugins.baz = function() {
  coverSomeWeirdEdgeCase();
}; // etc...
</pre></code></section><section data-bespoke-state="cleese"><h1>Why?</h1></section><section data-bespoke-state="backflip"><h2 class="bullet">Tiny core library</h2><h2 class="bullet">Extremely modular</h2><h2 class="bullet">Repo per feature</h2></section><section data-bespoke-state="mindblown"><h1>Bower package per feature.</h1></section><section data-bespoke-state="radcliffe"><h1>Seriously, why?</h1></section><section data-bespoke-state="yeoman"><h1>Yeoman.</h1></section><section data-bespoke-state="yeoman"><h2 class="bullet">Introducing...</h2><h1 class="bullet">generator-bespoke</h1></section><section data-bespoke-state="blue"><code class="language-bash bullet">$ npm install -g yo generator-bespoke</code><code class="language-bash bullet">$ yo bespoke
</code></section><section data-bespoke-state="blue" class="generator"></section><section data-bespoke-state="blue"><h1 class="bullet">Generates bower.json</h1><h2 class="bullet">(Among other things)</h2></section><section data-bespoke-state="blue"><code class="language-javascript"><pre>{
  &quot;name&quot;: &quot;hello-world-bespoke&quot;,
  &quot;version&quot;: &quot;0.0.0&quot;,
  &quot;dependencies&quot;: {
    &quot;bespoke.js&quot;: &quot;~0.2.0&quot;,
    &quot;bespoke-bullets&quot;: &quot;~0.2.0&quot;,
    &quot;bespoke-hash&quot;: &quot;~0.1.0&quot;,
    &quot;bespoke-state&quot;: &quot;~0.2.0&quot;,
    &quot;prism&quot;: &quot;gh-pages&quot;
  }
}
</pre></code></section><section data-bespoke-state="blue"><h1 class="bullet">Plus heaps more</h1><hr><ul><li>Boilerplate presentation</li><li>Grunt build system</li><li>Preview server + LiveReload</li><li>Compiles Jade, Stylus, CoffeeScript</li><li>Syntax highlighting with <a href="http://prismjs.com">Prism</a></li></ul></section><section data-bespoke-state="blue"><h1>Bonus!</h1></section><section data-bespoke-state="colberthighfive"><h1 class="bullet">GitHub Pages deploy task</h1><hr><h2 class="bullet">Publishing your deck is stupid easy.</h2></section><section data-bespoke-state="pumped"><h1>Demo time!</h1></section><section data-bespoke-state="mindblown"><h1>Google <a href="https://www.google.com/search?q=generator-bespoke">"generator-bespoke"</a></h1></section><section data-bespoke-state="fullthrottle dimmed"><div class="me"></div><h1>Thank you!</h1><h2><a href="http://bit.ly/roadto1kb">bit.ly/roadto1kb</a></h2><h3><a href="http://twitter.com/markdalgleish">@markdalgleish</a></h3></section></article><script src="bower_components/bespoke.js/dist/bespoke.min.js"></script><script src="bower_components/bespoke-bullets/dist/bespoke-bullets.min.js"></script><script src="bower_components/bespoke-hash/dist/bespoke-hash.min.js"></script><script src="bower_components/bespoke-state/dist/bespoke-state.min.js"></script><script src="bower_components/prism/prism.js"></script><script src="scripts/main.js"></script></body></html>